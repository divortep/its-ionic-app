<ng-container *ngIf="tasks; else loading">
    <ng-container *ngIf="tasks.length; else noItems">
        <ion-card *ngFor="let task of tasks"
                  (click)="onTaskClick(task)"
                  [class]="(task.acceptedDate || task.acceptedTo) ? 'card--accepted-task' : 'card--available-task'">
            <ng-container *ngIf="task.acceptedDate || task.acceptedTo">
                <ion-card-header>
                    <ion-card-subtitle>
                        <div *ngIf="task.acceptedDate">Accepted on: {{task.acceptedDate | date:'medium'}}</div>
                        <div *ngIf="task.teammate">Teammate: {{task.teammate}}</div>
                    </ion-card-subtitle>
                </ion-card-header>
            </ng-container>
            <ion-card-content>
                <ion-card-subtitle>
                    {{task.timeSlot}} <span class="card--quoted-time">({{task.quotedTime}})</span>
                </ion-card-subtitle>
                <ion-card-title>{{task.date}} ({{task.number}})</ion-card-title>
                <ion-card-subtitle class="card--address">{{task.address}}</ion-card-subtitle>
                <p *ngFor="let item of task.items">{{item}}</p>
            </ion-card-content>
        </ion-card>
    </ng-container>
</ng-container>

<ng-template #noItems>
    <div class="app-center">No tasks!</div>
</ng-template>

<ng-template #loading>
    <div class="app-center">
        <ion-spinner name="crescent"></ion-spinner>
    </div>
</ng-template>
